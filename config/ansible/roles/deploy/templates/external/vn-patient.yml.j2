---

version: '3'
networks:
  hiv-docker-net:

volumes:
  vn_patient_service_vol:
  vn_patient_db_vol:

services:
  vn_patient_service:
    container_name: vn_patient_service
    image: {{ image_name }}/{{ stage }}/patient-service:latest
    restart: unless-stopped
    environment:
      LOCAL_USER_ID: 1000
    networks:
      - hiv-docker-net
    working_dir: /var/www
    volumes:
      - ./config/vn_patient/storage/api-docs:/var/www/storage/api-docs
      - ./config/patientservice/storage/app:/var/www/storage/app
      - ./config/vn_patient/storage/oauth-private.key:/var/www/storage/oauth-private.key
      - ./config/vn_patient/storage/oauth-public.key:/var/www/storage/oauth-public.key
      - ./config/patientservice/storage/logs:/var/www/storage/logs
      - ./config/vn_patient/env:/var/www/.env
